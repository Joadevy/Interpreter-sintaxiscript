var __awaiter=this&&this.__awaiter||function(e,o,t,a){return new(t||(t=Promise))((function(n,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var o;e.done?n(e.value):(o=e.value,o instanceof t?o:new t((function(e){e(o)}))).then(i,s)}l((a=a.apply(e,o||[])).next())}))};import{esConstReal}from"../Analizador Lexico/Automatas/constanteReal.js";import{esSimboloEspecial}from"../Analizador Lexico/Automatas/simboloEspecial.js";import{esIdentificador}from"../Analizador Lexico/Automatas/identificador.js";import{esCadena}from"../Analizador Lexico/Automatas/cadena.js";import{tablaSimbolos}from"../Analizador Lexico/tablaSimbolos.js";export function mostrarInfo(e){let o=document.getElementById("output");if(o)if(e){let t=document.createElement("p");t.classList.add("output-text"),"errorLexico"==e[0]?t.innerHTML=` Se encontro el compLex: <span class="error">${e[0]}</span>`:"pesos"==e[0]?t.innerHTML=` Se encontro el compLex: <span class="complex">${e[0]}</span> y representa el fin de archivo.`:t.innerHTML=` Se encontro el compLex: <span class="complex">${e[0]}</span> y el lexema asociado es <span class="lexema">${e[2]}</span>`,o.appendChild(t),o.classList.add("output-show")}else alert("Ha ocurrido un error, intentalo de nuevo.")}export function obtenerSiguienteCompLex(e,o,t){let a,n=[...Array(33).keys()].slice(1);for(;n.includes(e.charCodeAt(o));)o++;if(o==e.length)a="pesos";else{if(esConstReal(e,o)[0]){let n=esConstReal(e,o);return a="tConstReal",[a,n[1],n[2],t]}if(esSimboloEspecial(e,o)[0]){let a=esSimboloEspecial(e,o);return[a[3],a[1],a[2],t]}if(esIdentificador(e,o)[0]){let n=esIdentificador(e,o);return t.hasOwnProperty(n[2].toUpperCase())?a=t[n[2].toUpperCase()]:(a="tId",t[n[2].toUpperCase()]="tId"),[a,n[1],n[2],t]}if(esCadena(e,o)[0]){let n=esCadena(e,o);return a="tCadena",[a,n[1],n[2],t]}a="errorLexico"}return[a]}export function analizadorLexico(e){return __awaiter(this,void 0,void 0,(function*(){let o=(yield e.text()).trim(),t=0,a="";for(;"pesos"!==a&&"errorLexico"!==a;){let e=obtenerSiguienteCompLex(o,t,tablaSimbolos);a=e[0],t=e[1],mostrarInfo(e)}}))}
