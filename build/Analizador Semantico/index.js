function agregarVariable(a,o){a.push(o)}function leerValor(a,o){for(let e in a)if(a[e].variable==o)return a[e].valor;const e="-- no se encontro la variable "+o+", no ha sido declarada --";console.log(e),mostrarInfoSemantico(e)}function asignarValor(a,o,e){let i=!1;for(let l in a)a[l].variable==o&&(a[l].valor=e,i=!0);if(!i){const a="-- no se encontro la variable "+o+", no ha sido declarada --";console.log(a),mostrarInfoSemantico(a)}}export function evaluarPrograma(a){evaluarCUERPO(a.hijos[3],[])}function evaluarCUERPO(a,o){evaluarSENTENCIA(a.hijos[0],o),evaluarSENTENCIAS(a.hijos[1],o)}function evaluarSENTENCIAS(a,o){0!==a.cantHijos&&"tPuntoComa"==a.hijos[0].simbolo&&evaluarCUERPO(a.hijos[1],o)}function evaluarSENTENCIA(a,o){"vDECLARACION"==a.hijos[0].simbolo?evaluarDECLARACION(a.hijos[0],o):"vASIGNACION"==a.hijos[0].simbolo?evaluarASIGNACION(a.hijos[0],o):"vLECTURA"==a.hijos[0].simbolo?evaluarLECTURA(a.hijos[0],o):"vESCRITURA"==a.hijos[0].simbolo?evaluarESCRITURA(a.hijos[0],o):"vCONDICIONAL"==a.hijos[0].simbolo?evaluarCONDICIONAL(a.hijos[0],o):"vMIENTRAS"==a.hijos[0].simbolo&&evaluarMIENTRAS(a.hijos[0],o)}function evaluarDECLARACION(a,o){evaluarVARIABLES(a.hijos[1],o)}function evaluarVARIABLES(a,o){agregarVariable(o,{variable:a.hijos[0].lexema,valor:0}),evaluarVARIABLE(a.hijos[1],o)}function evaluarVARIABLE(a,o){0!==a.cantHijos&&evaluarVARIABLES(a.hijos[1],o)}function evaluarASIGNACION(a,o){let e=[];evaluarEXPARIT(a.hijos[2],o,e),asignarValor(o,a.hijos[0].lexema,e[0])}function evaluarLECTURA(a,o){let e=parseFloat(prompt(a.hijos[2].lexema,""));asignarValor(o,a.hijos[4].lexema,e)}function evaluarESCRITURA(a,o){evaluarSALIDAS(a.hijos[2],o)}function evaluarSALIDAS(a,o){mostrarSalida(evaluarSALIDA(a.hijos[0],o)),evaluarSAUX(a.hijos[1],o)}function evaluarSAUX(a,o){0!==a.cantHijos&&evaluarSALIDAS(a.hijos[1],o)}function evaluarSALIDA(a,o){let e=[];return"vEXPARIT"==a.hijos[0].simbolo?evaluarEXPARIT(a.hijos[0],o,e):"tCadena"==a.hijos[0].simbolo&&(e[0]=a.hijos[0].lexema),e[0]}function evaluarCONDICIONAL(a,o){let e=[];evaluarCONDICION(a.hijos[2],o,e),e[0]?evaluarCUERPO(a.hijos[5],o):evaluarCONDICIONALFACT(a.hijos[7],o)}function evaluarCONDICIONALFACT(a,o){0!==a.cantHijos&&evaluarCUERPO(a.hijos[2],o)}function evaluarMIENTRAS(a,o){let e=[];for(evaluarCONDICION(a.hijos[2],o,e);e[0];)evaluarCUERPO(a.hijos[5],o),evaluarCONDICION(a.hijos[2],o,e)}function evaluarCONDICION(a,o,e){let i=[];evaluarIZQCOND(a.hijos[0],o,i),evaluarDISYUNCION(a.hijos[1],o,i,e)}function evaluarIZQCOND(a,o,e){let i=[];evaluarNEGACION(a.hijos[0],o,i),evaluarCONJUNCION(a.hijos[1],o,i,e)}function evaluarNEGACION(a,o,e){let i,l=[],t=[];if("tNot"==a.hijos[0].simbolo)evaluarNEGACION(a.hijos[1],o,e),e[0]=!e[0];else if("vEXPARIT"==a.hijos[0].simbolo)switch(evaluarEXPARIT(a.hijos[0],o,l),i=a.hijos[1].lexema,evaluarEXPARIT(a.hijos[2],o,t),i){case"==":e[0]=l[0]==t[0];break;case">=":e[0]=l[0]>=t[0];break;case"<=":e[0]=l[0]<=t[0];break;case">":e[0]=l[0]>t[0];break;case"<":e[0]=l[0]<t[0];break;case"<>":e[0]=l[0]!=t[0]}else"tCorcheteAbre"==a.hijos[0].simbolo&&evaluarCONDICION(a.hijos[1],o,e)}function evaluarCONJUNCION(a,o,e,i){if(0!==a.cantHijos){let l=[];evaluarNEGACION(a.hijos[1],o,l),e[0]=e[0]&&l[0],evaluarCONJUNCION(a.hijos[2],o,e,i)}else i[0]=e[0]}function evaluarDISYUNCION(a,o,e,i){let l=[];0==a.cantHijos?i[0]=e[0]:(evaluarIZQCOND(a.hijos[1],o,l),e[0]=e[0]||l[0],evaluarDISYUNCION(a.hijos[2],o,e,i))}function evaluarEXPARIT(a,o,e){let i=[],l=[];evaluarIZQARIT(a.hijos[0],o,i),evaluarSUMARESTA(a.hijos[1],o,i,l),e[0]=l[0]}function evaluarIZQARIT(a,o,e){let i=[];evaluarRAIZPOT(a.hijos[0],o,i),evaluarMULTDIV(a.hijos[1],o,i,e)}function evaluarRAIZPOT(a,o,e){let i=[],l=[];"tRaiz"==a.hijos[0].simbolo?(evaluarEXPARIT(a.hijos[2],o,i),i[0]=Math.round(i[0]),l[0]=Math.sqrt(i[0]),evaluarPOT(a.hijos[4],o,l,e)):"vOPERANDOS"==a.hijos[0].simbolo&&(evaluarOPERANDOS(a.hijos[0],o,l),evaluarPOT(a.hijos[1],o,l,e))}function evaluarPOT(a,o,e,i){let l=[];0==a.cantHijos?i[0]=e[0]:(evaluarOPERANDOS(a.hijos[1],o,l),l[0]=Math.round(l[0]),i[0]=Math.pow(e[0],l[0]))}function evaluarSUMARESTA(a,o,e,i){let l=[],t=[];0==a.cantHijos?i[0]=e[0]:"tSuma"==a.hijos[0].simbolo?(evaluarOPERANDOS(a.hijos[1],o,t),l[0]=e[0]+t[0],evaluarSUMARESTA(a.hijos[2],o,l,i)):"tResta"==a.hijos[0].simbolo&&(evaluarOPERANDOS(a.hijos[1],o,t),l[0]=e[0]-t[0],evaluarSUMARESTA(a.hijos[2],o,l,i))}function evaluarMULTDIV(a,o,e,i){let l=[],t=[];0==a.cantHijos?i[0]=e[0]:"tProducto"==a.hijos[0].simbolo?(evaluarOPERANDOS(a.hijos[1],o,t),l[0]=e[0]*t[0],evaluarMULTDIV(a.hijos[2],o,l,i)):"tDivision"==a.hijos[0].simbolo&&(evaluarOPERANDOS(a.hijos[1],o,t),l[0]=e[0]/t[0],evaluarMULTDIV(a.hijos[2],o,l,i))}function evaluarOPERANDOS(a,o,e){"tConstReal"==a.hijos[0].simbolo?e[0]=parseFloat(a.hijos[0].lexema):"tParentesisAbre"==a.hijos[0].simbolo?evaluarEXPARIT(a.hijos[1],o,e):"tResta"==a.hijos[0].simbolo?(evaluarOPERANDOS(a.hijos[1],o,e),e[0]=-e[0]):"tId"==a.hijos[0].simbolo&&0==a.hijos[0].cantHijos&&(e[0]=leerValor(o,a.hijos[0].lexema))}function mostrarSalida(a){var o;let e=document.getElementById("output");if(!e){const a=document.getElementById("main"),o=document.getElementById("template-output").content.cloneNode(!0);a.appendChild(o),e=document.getElementById("output")}const i=document.createElement("p");i.classList.add("output-text"),a=a.toString().match(/[^"]/gi).join(""),i.textContent=a,e&&!(null===(o=e.firstElementChild)||void 0===o?void 0:o.classList.contains("wrong"))&&(e.appendChild(i),e.classList.add("output-show"))}function mostrarInfoSemantico(a){let o=document.getElementById("output");if(!o){const a=document.getElementById("main"),e=document.getElementById("template-output").content.cloneNode(!0);a.appendChild(e),o=document.getElementById("output")}if(o){o.textContent="";let e=document.createElement("p");e.classList.add("output-text"),e.classList.add("wrong"),e.innerHTML=`Ocurrio un <span class="error">error semantico</span>. Log: <span class="complex">${a}</span>`,o.appendChild(e),o.classList.add("output-show")}}